# NeuralSteganography (نسخهٔ CLI ساده)

این مخزن حاوی پیاده‌سازی تمیز‌شدهٔ ابزار نهان‌نگاری عصبی است که مطابق برنامهٔ مهندسی پروژه تنها با یک اسکریپت خط فرمان اجرا می‌شود. کدهای اولیهٔ مرجع در پوشهٔ `code_base/` نگهداری شده‌اند و منطق نهایی در مسیر `src/` تکامل یافته است.

## پیش‌نیازها
- Python 3.10 یا جدیدتر
- دسترسی به اینترنت برای بارگیری مدل‌های HuggingFace در صورت استفاده از `gpt2-fa`

## نصب وابستگی‌ها
```bash
python -m venv .venv
source .venv/bin/activate
pip install --upgrade pip
pip install -r requirements.txt
```

## اجرای خط فرمان
اسکریپت اصلی `main.py` با استفاده از کتابخانهٔ `click` یک بار کل چرخه را اجرا می‌کند: دریافت پیام محرمانه، تولید متن پوششی و سپس بازیابی پیام از همان متن.

```bash
python main.py --model mock
```

با اجرای دستور فوق، برنامه پیام را از شما می‌پرسد و خروجی مشابه زیر خواهد داشت:

```
[مرحله ۱] در حال بارگذاری مدل زبانی…
[مرحله ۲] تولید متن پوششی…

[متن پوششی]
...

[مرحله ۳] بازیابی پیام محرمانه…

[پیام بازیابی‌شده]
...
```

### گزینه‌های مهم
- `--model`: نام مدل زبانی. مقدار `mock` برای تست سریع استفاده می‌شود. برای استفاده از GPT2-fa می‌توانید `--model gpt2-fa` را وارد کنید (به `transformers` و دانلود مدل نیاز دارد).
- `--seed-text`: متن اولیه برای شروع نمونه‌گیری. مقدار پیش‌فرض فارسی و قابل تغییر است.
- `--quality`: پارامترهای کیفیت به صورت `کلید=مقدار` (مثلاً `--quality temp=0.9`). این گزینه را می‌توان چندبار استفاده کرد.
- `--no-crc` و `--no-ecc`: در صورت نیاز می‌توانید کنترل خطا یا ECC را غیرفعال کنید.

## ساختار پروژه
- `main.py`: اسکریپت CLI که چرخهٔ کامل نهان‌سازی و واگشایی را انجام می‌دهد.
- `src/neuralstego/`: هستهٔ ماژولار شامل رمزگذار حسابی، چارچوب فریمینگ، نگهبان کیفیت و غیره.
- `code_base/`: نسخهٔ اولیهٔ کد مرجع برای مقایسه و بررسی.
- `tests/`: مجموعه‌ای از تست‌های `pytest` برای اطمینان از سلامت ماژول‌ها.

## نکات اضافی
- برای بارگیری مدل GPT2-fa می‌توانید از اسکریپت `scripts/download_models.py` استفاده کنید.
- هیچ فایل بزرگی در مخزن نگهداری نمی‌شود؛ مدل‌ها در کش HuggingFace ذخیره خواهند شد.
- لطفاً قبل از انتشار، تست‌ها را با `pytest` اجرا کنید.
