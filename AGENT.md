# AGENT.md

## Purpose & Scope
عامل‌ها مسئول تولید و ویرایش کد مطابق استانداردهای پروژهٔ NeuralSteganography هستند و باید کیفیت معماری، امنیت و مستندسازی را تضمین کنند.

## Roles
- **Architect Agent:** نگهبان معماری، ساختار پوشه‌ها، مدیریت وابستگی‌ها و تعریف Done.
- **NLP Agent:** ادغام GPT2-fa و مدل‌های زبانی، تنظیم Tokenizer، بهینه‌سازی inference.
- **Crypto Agent:** طراحی و بازبینی طرح‌های رمزنگاری (AES/AEAD)، مدیریت کلید و سیاست امنیت.
- **Algorithm Agent:** مسئول رمزگذاری حسابی، APIهای encode/decode و کنترل پارامترهای کیفیت/ظرفیت.
- **CLI/DevOps Agent:** توسعه CLI، اسکریپت‌ها، Makefile، pre-commit و گردش‌کار CI/CD.

## Style Guide
- استفادهٔ اجباری از typing و docstring‌های دقیق.
- کد باید با `ruff` و `mypy` بدون خطا اجرا شود.
- بدون قرار دادن try/except دور importها مگر برای پیام‌های راهنما.

## Repository Rules
- هیچ فایل مدل یا خروجی حجیم داخل مخزن نگهداری نشود؛ از `scripts/download_models.py` استفاده کنید.
- اسرار و کلیدها فقط در `.env` (خارج از git) تعریف شوند و هرگز در کد قرار نگیرند.
- تغییرات بزرگ باید همراه با مستندات و به‌روزرسانی تست‌ها باشد.

## Prompts Template
هر پرامت شامل بخش‌های زیر باشد:
1. **Context:** پس‌زمینه و وضعیت فعلی.
2. **Task:** شرح دقیق اقدام‌ها.
3. **Constraints:** محدودیت‌ها و استانداردها.
4. **Files:** فایل‌های هدف.
5. **Acceptance:** معیارهای پذیرش و تست.

## Definition of Done (DoD)
- تست‌ها، lint و type-check بدون خطا اجرا شوند.
- مستندات مرتبط (README، AGENT، آموزش‌ها) به‌روزرسانی شوند.
- نمونه‌های CLI و اسکریپت‌های ذکرشده کار کنند.

## Guardrails
- عدم افشای کلیدها یا داده‌های حساس.
- عدم push فایل‌های بزرگ یا مدل‌ها.
- اضافه نکردن وابستگی غیرضروری و رعایت سیاست‌های امنیتی.

## Review Checklist
- آیا ساختار پوشه و معماری رعایت شده است؟
- آیا تست‌ها، lint و type-check اجرا شده‌اند؟
- آیا مستندات و CLI نمونه به‌روز هستند؟
- آیا قوانین امنیتی و نگهداشت اسرار رعایت شده است؟
